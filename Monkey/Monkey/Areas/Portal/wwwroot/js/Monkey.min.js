var monkey={initToolTip:function(){$('[data-toggle="tooltip"]').tooltip()},initConfirmDialog:function(){$('[data-plugin="confirm"]').click(function(){var n=$(this);swal({title:n.data("confirm-title"),text:n.data("confirm-message"),type:"warning",showCancelButton:!0,confirmButtonClass:"btn-pink",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!1,closeOnCancel:!1},function(t){if(t){var i=n.data("confirm-yes-callback");eval(i);swal(n.data("confirm-yes-title")||"Deleted!",n.data("confirm-yes-message")||"Delete Successful","success")}else swal(n.data("confirm-no-title")||"Cancelled",n.data("confirm-no-message"),"error")})})},setupAjax:function(){$.ajaxSetup({headers:{"X-XSRF-TOKEN":$("[name=ape]").val()},type:"POST",cache:!1,error:function(n){if(console.log("[Request Error]",n),n.status===401||n.status===403)window.location.href="/Portal/Auth";else if(n.status===404)window.location.href="/Portal";else try{var t=JSON.parse(n.responseText);t.code?monkey.notify("Error",t.message,"error"):monkey.notify("Error","System error, please try again or contact administrator!","error")}catch(i){monkey.notify("Error","System error, please try again or contact administrator!","error")}}})},notify:function(n,t,i,r){r=r||{};n=n||undefined;t=t||"";i=i||"info";r.progressBar=r.progressBar||!0;r.timeOut=r.timeOut||5e3;r.preventDuplicates=r.preventDuplicates||!1;r.positionClass=r.positionClass||"toast-bottom-right";switch(i){case"success":toastr.success(t,n,r);break;case"warning":toastr.warning(t,n,r);break;case"error":toastr.error(t,n,r);break;case"info":toastr.info(t,n,r);break;default:toastr.info(t,n,r)}},initSlidePanel:function(){$('[data-toggle="slidePanel"]').click(function(){var n=$(this);$.slidePanel.show({url:n.data("url"),settings:{method:"GET",cache:!1}},{direction:"right"})})},renderSlugAuto:function(n,t){n.on("keyup",function(){t.val(n.val().genSlug())})},notificationHub:{connection:null,connect:function(){monkey.notificationHub.connection=new signalR.HubConnection("/portal/notification");monkey.notificationHub.connection.on("notification",n=>{console.log(n)});monkey.notificationHub.connection.start().then(()=>{console.log("[Socket] connected to notification hub")}).catch(n=>{console.log(`[Socket] connection error: ${n}`)})},sendUsers:function(n,t){monkey.notificationHub.connection.invoke("notificationUsersAsync",n,t)},sendPermissions:function(n,t){monkey.notificationHub.connection.invoke("notificationPermissionsAsync",n,t)}},abbreviateNumber:function(n){var t=Math.log10(n)/3|0;if(t==0)return n;var i=[""," K"," M"," G"," T"," P"," E"][t],r=Math.pow(10,t*3),u=n/r;return u.toFixed(1)+i}};$(function(){monkey.setupAjax();monkey.initToolTip();monkey.initConfirmDialog();monkey.initSlidePanel();monkey.notificationHub.connect()});String.prototype.preventInjection=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;")};String.prototype.genSlug=function(){var t,n;return t=this,n=t.toLowerCase(),n=n.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),n=n.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),n=n.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),n=n.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),n=n.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),n=n.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),n=n.replace(/đ/gi,"d"),n=n.replace(/c#/gi,"c-sharp"),n=n.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,""),n=n.replace(/ /gi,"-"),n=n.replace(/\-\-\-\-\-/gi,"-"),n=n.replace(/\-\-\-\-/gi,"-"),n=n.replace(/\-\-\-/gi,"-"),n=n.replace(/\-\-/gi,"-"),n="@"+n+"@",n.replace(/\@\-|\-\@|\@/gi,"")};Array.prototype.remove=function(){for(var n,t=arguments,i=t.length,r;i&&this.length;)for(n=t[--i];(r=this.indexOf(n))!==-1;)this.splice(r,1);return this};Array.prototype.contains=function(n){return this.indexOf(n)>-1};